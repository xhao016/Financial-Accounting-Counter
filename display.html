<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</head>

<body>
  <div class="container mt-5">
<button class="btn btn-primary" onclick="window.location.href = 'index.html'">Calculate Again</button>
<button class="btn btn-primary print">Print</button>
<table id="users" class="table table-bordered table-light table-hover">
  <thead>
    <tr>
      <th scope="col">Necessity (55%)</th>
      <th scope="col">Financial (10%)</th>
      <th scope="col">Education (10%)</th>
      <th scope="col">Long Term (10%)</th>
      <th scope="col">Entertaiment(10%)</th>
      <th scope="col">Give (5%)</th>
    </tr>
  </thead>
  <tbody>
  </tbody>
</table>
</div>

<script>
  // Open the database
  var db = openDatabase('mydb', '1.0', 'My Database', 2 * 1024 * 1024);

  // Retrieve the form data from the database
  db.transaction(function(tx) {
    tx.executeSql('SELECT * FROM users', [], function(tx, results) {
      var len = results.rows.length;
      if (len > 0) {
        var usersTableBody = document.querySelector('#users tbody');
        for (var i = 0; i < len; i++) {
          var user = results.rows.item(i);
          var id = user.id;
          var month = user.month;
          var necessity = user.necessity;
          var financial = user.financial;
          var education = user.education;
          var longterm = user.longterm;
          var entertainment = user.entertainment;    
          var give = user.give;

          // Create a new row for the user data
          var userRow = document.createElement('tr');
          userRow.setAttribute('data-id', i + 1);
          userRow.innerHTML = 
                              '<td>' + necessity + '</td>' +
                              '<td>' + financial + '</td>' +
                              '<td>' + education +  '</td>' +
                              '<td>' + longterm + '</td>' +
                              '<td>' + entertainment + '</td>' +
                              '<td>' + give + '</td>';

          // Add the user data to the table
          usersTableBody.appendChild(userRow);
        }
        // Get the ID value from the URL query parameter
        var urlParams = new URLSearchParams(window.location.search);
        id = urlParams.get('id');

        // Find the table row with the matching ID value
        userRow = document.querySelector('#users tr[data-id="' + id + '"]');

        // Show only the matching table row
        if (userRow) {
          userRow.style.display = 'table-row';

        // Hide all other rows
          var rows = usersTableBody.querySelectorAll('tr');
          for (var i = 0; i < rows.length; i++) {
            if (rows[i] !== userRow) {
              rows[i].style.display = 'none';
            }
          }
        } else {
          // If no matching ID value was found, show all rows
          var rows = usersTableBody.querySelectorAll('tr');
          for (var i = 0; i < rows.length; i++) {
            rows[i].style.display = 'table-row';
          }
        }
      }
    });
  });

    

  $(document).ready(function() {
  $('.print').click(function() {
    window.print();
  });
});

</script>
</body>
</html>